<!doctype html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" >
<meta name="generator" content="pandoc" />

<title>Interactivity</title>


<script id="distill-metadata" type="application/json">
{"link-citations":true,"title":"Interactivity","description":"Enhance communication with interactive visualizations"}
</script>

<style type="text/css">
body {
  display: none;
}
</style>

  <script src="site_libs/jquery-1.12.4/jquery.min.js"></script>
  <link href="site_libs/distill-2.0/distill.css" rel="stylesheet" />
  <script src="site_libs/distill-2.0/distill.js"></script>
  <script src="site_libs/distill-2.0/template.v2.js"></script>
  <script src="site_libs/distill-2.0/distill-post.js"></script>
  <script src="site_libs/htmlwidgets-1.2/htmlwidgets.js"></script>
  <link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
  <script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
  <link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
  <script src="site_libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
  <script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
  <link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
  <script src="site_libs/leaflet-binding-2.0.0/leaflet.js"></script>
  <link href="site_libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
  <script src="site_libs/dygraphs-1.1.1/dygraph-combined.js"></script>
  <script src="site_libs/moment-2.8.4/moment.js"></script>
  <script src="site_libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
  <script src="site_libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
  <script src="site_libs/dygraphs-binding-1.1.1.4/dygraphs.js"></script>
  <script src="site_libs/r2d3-render-0.1.0/r2d3-render.js"></script>
  <script src="site_libs/r2d3-binding-0.2/r2d3.js"></script>
  <script src="site_libs/d3v5-5.0.0/d3.js"></script>
  <d-front-matter>
  <script id="distill-front-matter" type="text/json">
  {"title":"Interactivity","description":"Enhance communication with interactive visualizations","authors":{}}
  </script>
  </d-front-matter>
  <script type="text/javascript">
  window.distill_data = {
  };
  </script>

<style type="text/css">
pre>code {
  white-space: pre-wrap;
  line-height: 1.5;
}
d-article table th, d-article table td {
  padding: 7px 10px;
}
.pagedtable-footer {
  font-size: 15px;
}
</style>


  <link rel="stylesheet" href="frame.css" type="text/css" />
  <link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

      <div class="distill-header">
    <div class="content">
      <a href="index.html" class="logo">
        <svg width="24px" viewBox="-607 419 64 64">
          <path d="M-573.4,478.9c-8,0-14.6-6.4-14.6-14.5s14.6-25.9,14.6-40.8c0,14.9,14.6,32.8,14.6,40.8S-565.4,478.9-573.4,478.9z"/>
            </svg>
        Distill for R Markdown
      </a>
      <div class="nav">
        <a href="index.html">Basics</a>
        <a href="figures.html">Figures</a>
        <a href="tables.html">Tables</a>
        <a href="diagrams.html">Diagrams</a>
        <a href="interactivity.html">Interactivity</a>
      </div>
    </div>
    </div>
  
<d-title>
<h1>Interactivity</h1>
<p>Enhance communication with interactive visualizations</p>
</d-title>

<d-article class="centered">
<p>There are a variety of ways to add interactivity to your Distill articles, including:</p>
<ul>
<li><p>Using pre-built <a href="http://www.htmlwidgets.org">htmlwidgets</a> that wrap JavaScript visualization libraries like <a href="http://rstudio.github.io/leaflet/">Leaflet</a>, <a href="https://plot.ly/r/">Plotly</a>, <a href="http://rstudio.github.io/dygraphs/">dygraphs</a>, and <a href="https://bwlewis.github.io/rthreejs/">threejs</a>.</p></li>
<li><p>Creating custom <a href="https://d3js.org/">D3.js</a> interactive visualizations using the <a href="https://rstudio.github.io/r2d3/">r2d3</a> package.</p></li>
<li><p>Using <a href="https://shiny.rstudio.com">Shiny</a> to create an <a href="https://rmarkdown.rstudio.com/authoring_shiny.html#embedded_applications">interactive document</a> that embeds interactive components within your article.</p></li>
</ul>
<h2 id="htmlwidgets">htmlwidgets</h2>
<p>Including <a href="http://www.htmlwidgets.org">htmlwidgets</a> within a Distill article is as easy as including an R plot. For example, the following code embeds a Leaflet map:</p>
<pre class="clike"><code>
```{r}
library(leaflet)
leaflet() %&gt;%
  addTiles() %&gt;%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup=&quot;The birthplace of R&quot;)
```</code></pre>
<div class="distill-layout-chunk l-body">
<div id="htmlwidget-54ddc7d39a7dc7e2354e" style="width:576px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-54ddc7d39a7dc7e2354e">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[-36.852,174.768,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"The birthplace of R",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-36.852,-36.852],"lng":[174.768,174.768]}},"evals":[],"jsHooks":[]}</script>
</div>
<p>You can also use <a href="figures.html">figure layout</a> options with htmlwidgets. For example, here we set <code>distill.layout=&quot;l-page&quot;</code> to specify that we want the widget to span the width of the page:</p>
<pre class="clike"><code>
```{r, distill.layout=&quot;l-page&quot;, fig.height=2}
library(dygraphs)
dygraph(ldeaths) %&gt;% 
  dyRangeSelector()
```</code></pre>
<div class="distill-layout-chunk l-page">
<div id="htmlwidget-54323c4697401f3a9836" style="width:576px;height:192px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-54323c4697401f3a9836">{"x":{"attrs":{"labels":["month","V1"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}},"showRangeSelector":true,"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel"},"scale":"monthly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["1974-01-01T00:00:00.000Z","1974-02-01T00:00:00.000Z","1974-03-01T00:00:00.000Z","1974-04-01T00:00:00.000Z","1974-05-01T00:00:00.000Z","1974-06-01T00:00:00.000Z","1974-07-01T00:00:00.000Z","1974-08-01T00:00:00.000Z","1974-09-01T00:00:00.000Z","1974-10-01T00:00:00.000Z","1974-11-01T00:00:00.000Z","1974-12-01T00:00:00.000Z","1975-01-01T00:00:00.000Z","1975-02-01T00:00:00.000Z","1975-03-01T00:00:00.000Z","1975-04-01T00:00:00.000Z","1975-05-01T00:00:00.000Z","1975-06-01T00:00:00.000Z","1975-07-01T00:00:00.000Z","1975-08-01T00:00:00.000Z","1975-09-01T00:00:00.000Z","1975-10-01T00:00:00.000Z","1975-11-01T00:00:00.000Z","1975-12-01T00:00:00.000Z","1976-01-01T00:00:00.000Z","1976-02-01T00:00:00.000Z","1976-03-01T00:00:00.000Z","1976-04-01T00:00:00.000Z","1976-05-01T00:00:00.000Z","1976-06-01T00:00:00.000Z","1976-07-01T00:00:00.000Z","1976-08-01T00:00:00.000Z","1976-09-01T00:00:00.000Z","1976-10-01T00:00:00.000Z","1976-11-01T00:00:00.000Z","1976-12-01T00:00:00.000Z","1977-01-01T00:00:00.000Z","1977-02-01T00:00:00.000Z","1977-03-01T00:00:00.000Z","1977-04-01T00:00:00.000Z","1977-05-01T00:00:00.000Z","1977-06-01T00:00:00.000Z","1977-07-01T00:00:00.000Z","1977-08-01T00:00:00.000Z","1977-09-01T00:00:00.000Z","1977-10-01T00:00:00.000Z","1977-11-01T00:00:00.000Z","1977-12-01T00:00:00.000Z","1978-01-01T00:00:00.000Z","1978-02-01T00:00:00.000Z","1978-03-01T00:00:00.000Z","1978-04-01T00:00:00.000Z","1978-05-01T00:00:00.000Z","1978-06-01T00:00:00.000Z","1978-07-01T00:00:00.000Z","1978-08-01T00:00:00.000Z","1978-09-01T00:00:00.000Z","1978-10-01T00:00:00.000Z","1978-11-01T00:00:00.000Z","1978-12-01T00:00:00.000Z","1979-01-01T00:00:00.000Z","1979-02-01T00:00:00.000Z","1979-03-01T00:00:00.000Z","1979-04-01T00:00:00.000Z","1979-05-01T00:00:00.000Z","1979-06-01T00:00:00.000Z","1979-07-01T00:00:00.000Z","1979-08-01T00:00:00.000Z","1979-09-01T00:00:00.000Z","1979-10-01T00:00:00.000Z","1979-11-01T00:00:00.000Z","1979-12-01T00:00:00.000Z"],[3035,2552,2704,2554,2014,1655,1721,1524,1596,2074,2199,2512,2933,2889,2938,2497,1870,1726,1607,1545,1396,1787,2076,2837,2787,3891,3179,2011,1636,1580,1489,1300,1356,1653,2013,2823,3102,2294,2385,2444,1748,1554,1498,1361,1346,1564,1640,2293,2815,3137,2679,1969,1870,1633,1529,1366,1357,1570,1535,2491,3084,2605,2573,2143,1693,1504,1461,1354,1333,1492,1781,1915]]},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
</div>
<p>Note that we specify <code>fig.height=2</code> to provide a more natural height for a widget that spans the entire width of the page.</p>
<p>To learn about available htmlwidgets see the <a href="http://www.htmlwidgets.org/showcase_leaflet.html">showcase page</a> and the <a href="http://gallery.htmlwidgets.org/">htmlwidget gallery</a>.</p>
<h2 id="r2d3">r2d3</h2>
<p>The <a href="https://rstudio.github.io/r2d3/">r2d3</a> package enables you to easily incorporate interactive graphics created using <a href="https://d3js.org/">D3.js</a> in your Distill articles.</p>
<p>For example, the following renders an interactive <a href="https://en.wikipedia.org/wiki/Voronoi_diagram">Veronoi diagram</a> created using D3:</p>
<pre class="clike"><code>
```{r, distill.layout=&quot;l-page&quot;, fig.height=6}
library(r2d3)
r2d3(script = &quot;voronoi.js&quot;)
```</code></pre>
<div class="distill-layout-chunk l-page">
<div id="htmlwidget-76a5f5ad715b74723eb1" style="width:576px;height:576px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-76a5f5ad715b74723eb1">{"x":{"data":null,"type":"NULL","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  d3/voronoi/voronoi.js */\n// !preview r2d3 d3_version = 4\n\n// Based on: https://bl.ocks.org/mbostock/4060366\n\nsvg.on(\"touchmove mousemove\", moved);\n\nvar sites = d3.range(100)\n    .map(function(d) { return [Math.random() * width, Math.random() * height]; });\n\nvar voronoi = d3.voronoi()\n    .extent([[-8, -8], [width + 8, height + 8]]);\n\nvar polygon = svg.append(\"g\")\n    .attr(\"class\", \"polygons\")\n  .selectAll(\"path\")\n  .data(voronoi.polygons(sites))\n  .enter().append(\"path\")\n    .call(redrawPolygon);\n\nvar link = svg.append(\"g\")\n    .attr(\"class\", \"links\")\n  .selectAll(\"line\")\n  .data(voronoi.links(sites))\n  .enter().append(\"line\")\n    .call(redrawLink);\n\nvar site = svg.append(\"g\")\n    .attr(\"class\", \"sites\")\n  .selectAll(\"circle\")\n  .data(sites)\n  .enter().append(\"circle\")\n    .attr(\"r\", 2.5)\n    .call(redrawSite);\n\nfunction moved() {\n  sites[0] = d3.mouse(this);\n  redraw();\n}\n\nfunction redraw() {\n  var diagram = voronoi(sites);\n  polygon = polygon.data(diagram.polygons()).call(redrawPolygon);\n  link = link.data(diagram.links()), link.exit().remove();\n  link = link.enter().append(\"line\").merge(link).call(redrawLink);\n  site = site.data(sites).call(redrawSite);\n}\n\nfunction redrawPolygon(polygon) {\n  polygon\n      .attr(\"d\", function(d) { return d ? \"M\" + d.join(\"L\") + \"Z\" : null; });\n}\n\nfunction redrawLink(link) {\n  link\n      .attr(\"x1\", function(d) { return d.source[0]; })\n      .attr(\"y1\", function(d) { return d.source[1]; })\n      .attr(\"x2\", function(d) { return d.target[0]; })\n      .attr(\"y2\", function(d) { return d.target[1]; });\n}\n\nfunction redrawSite(site) {\n  site\n      .attr(\"cx\", function(d) { return d[0]; })\n      .attr(\"cy\", function(d) { return d[1]; });\n}\n};","style":"/* R2D3 Source File:  d3/voronoi/voronoi.css */\n.links {\n  stroke: #000;\n  stroke-opacity: 0.2;\n}\n\n.polygons {\n  fill: none;\n  stroke: #000;\n}\n\n.polygons :first-child {\n  fill: #f00;\n}\n\n.sites {\n  fill: #000;\n  stroke: #fff;\n}\n\n.sites :first-child {\n  fill: #fff;\n}","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null}},"evals":[],"jsHooks":[]}</script>
</div>
<p>Note that we specify <code>distill.layout=&quot;l-page&quot;</code> to indicate that we want the visualization to occupy the full width of the page.</p>
<h2 id="shiny">Shiny</h2>
<p>You can use <a href="https://shiny.rstudio.com">Shiny</a> components within your Distill articles to allow your readers to change the parameters underlying your analysis and see the results immediately. To use Shiny with Distill, first specify that you want to use the Shiny runtime with your document:</p>
<pre><code>
---
title: &quot;Interactive Distill with Shiny&quot;
output: distill::distill_article
runtime: shiny
---</code></pre>
<p>This turns your Distill article into an <a href="https://rmarkdown.rstudio.com/authoring_shiny.html">interactive document</a>, enabling you to add Shiny inputs and output directly to the document.</p>
<p>Here’s an example of a Distill article with interactive Shiny components (<a href="https://jjallaire.shinyapps.io/distill-interactive-document/" class="uri">https://jjallaire.shinyapps.io/distill-interactive-document/</a>):</p>
<p><img src="images/shiny.png" class="screenshot" style="width:100.0%" /></p>
<p>This was the R code used to create the interactive Shiny components:</p>
<div class="distill-layout-chunk l-body">
<pre class="r"><code>
inputPanel(
  selectInput(&quot;n_breaks&quot;, label = &quot;Number of bins:&quot;,
              choices = c(10, 20, 35, 50), selected = 20),
  
  sliderInput(&quot;bw_adjust&quot;, label = &quot;Bandwidth adjustment:&quot;,
              min = 0.2, max = 2, value = 1, step = 0.2)
)

renderPlot({
  hist(faithful$eruptions, probability = TRUE, breaks = as.numeric(input$n_breaks),
       xlab = &quot;Duration (minutes)&quot;, main = &quot;Geyser eruption duration&quot;)
  
  dens &lt;- density(faithful$eruptions, adjust = input$bw_adjust)
  lines(dens, col = &quot;blue&quot;)
})</code></pre>
</div>
<p>You can see the full source code for this example at <a href="https://github.com/jjallaire/distill/blob/master/inst/examples/distill-interactive-document.Rmd">distill-interactive-document.Rmd</a>.</p>
<p>Learn more <a href="https://rmarkdown.rstudio.com/authoring_shiny.html">interactive documents</a> on the R Markdown website.</p>
</d-article>

<d-appendix class="centered">
</d-appendix>

  <div class="distill-footer">
  <div class="l-page">
    <div class="description">
    Created using <a class="logo" style="color: rgba(255, 255, 255, 0.4)" href="index.html">Distill for R Markdown</a>
    </div>
    <div class="nav">
      <a href="index.html">Basics</a>
      <a href="figures.html">Figures</a>
      <a href="tables.html">Tables</a>
      <a href="diagrams.html">Diagrams</a>
      <a href="interactivity.html">Interactivity</a>
      <a href="https://github.com/jjallaire/distill">GitHub</a>
    </div>
    <p>
    © Copyright 2018 The Distill Template Authors and RStudio, Inc.
    </p>
    <p>
    Software licensed under the <a class="logo" style="color: rgba(255, 255, 255, 0.4)" href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, v2.0</a>.<br/>
    Docs licensed under <a class="logo" style="color: rgba(255, 255, 255, 0.4)" href="https://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution License, v3.0</a>
    </p>
  </div>
  </div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
