---
title: "Distill for R Markdown"
description: | 
  A format devoted to clear explanations, native to the web
authors:
  - JJ Allaire: https://github.com/jjallaire
  - Rich Iannone: https://github.com/rich-iannone
  - Yihui Xie: https://github.com/yihui
affiliations:
  - RStudio: https://www.rstudio.com
  - RStudio: https://www.rstudio.com
  - RStudio: https://www.rstudio.com
bibliography: biblio.bib
---

<!---
- Add r2d3 and shiny sections 
- Markdown code block jank on initial render 

- larger scale visualization layouts
- web page metadata generation/redaction
- article metadata (DOI, citation, etc.)
- index pages (consider using iframes for distributed content authoring)
- site generation

--->

```{r setup, include=FALSE}
library(ggplot2)
library(knitr)
```

Distill is an online publication format designed for technical and academic communication. Distill articles include:

- Reader-friendly typography that adapts well to mobile devices.
- Features essential to technical writing like [LaTeX math](#equations), [citations], and [footnotes].
- Flexible [figure layout](figures.html) options (e.g. displaying figures at a larger width than the article text).
- Attractively rendered [tables](tables.html) with optional support for pagination.
- Support for a wide variety of [diagramming tools](diagrams.html) for illustrating concepts.
- A variety of ways to enhance articles with [interactive visualiztions](interactivity.html).

The Distill web framework was originally created for use in <https://distill.pub> (a machine learning journal). Distill for R Markdown enables you to easily author Distill articles using a fully reproducible workflow based on literate programming[@knuth1984].

## Getting Started

To create an [R Markdown](https://rmarkdown.rstudio.com) document that uses the Distill format, first install the **distill** R package:

```r
devtools::install_github("jjallaire/distill")
```

Then, use the **New R Markdown** dialog within RStudio to create a new Distill article:

![](images/new_distill_article.png){width="100%" .screenshot}

You can also create a new Distill article from the command line with:

```r
library(rmarkdown)
draft("article.Rmd", "distill_article", package = "distill")
```

<div id="front-matter"></div>

Distill articles use `distill::distill_article` as their output format, and typically include title, description, author/affiliation, and bibliography entries in their YAML front-matter:

```markup
---
title: "Distill for R Markdown"
description: | 
  A format devoted to clear explanations, native to the web
authors:
  - JJ Allaire: https://github.com/jjallaire
  - Rich Iannone: https://github.com/rich-iannone
  - Yihui Xie: https://github.com/yihui
affiliations:
  - RStudio: https://www.rstudio.com
  - RStudio: https://www.rstudio.com
  - RStudio: https://www.rstudio.com
output: distill::distill_article
bibliography: biblio.bib
---
```

The article's description and author bylines are automatically rendered as part of the title area of the document.

The `bibliography` field is used to provide a reference to the Bibtex file where all of the sources cited in your article are defined. The [citations] section describes how to include references to these sources in your article.

## Figures

Distill provides a number of options for laying out figures within your article. By default figures span the width of the main article body:

![](images/l-body-figure.png){width=100%}

However, some figures benefit from using additional horizontal space. In this cases the `distill.layout` chunk option enables you to specify a wide variety of other layouts. 

For example, if we wanted to display a figure a bit outside the bounds of the article text, we could specify the `l-middle` layout via the `distill.layout` chunk option:

````clike
```{r, distill.layout="l-middle", fig.width=6, fig.height=1.5}`r ''`
library(ggplot2)
ggplot(diamonds, aes(carat, price)) + geom_smooth() +
  facet_grid(~ cut)
```
````

```{r, distill.layout="l-middle"}
include_graphics("images/l-middle-figure.png")
```

Note that when specifying an alternate `distill.layout` you should also specify an appropriate `fig.width` and `fig.height` for that layout. These values don't determine the absolute size of the figure (that's dynamic based on the layout) but they do determine the aspect ratio of the figure.

See the documentation on [figure layout](figures.html) for details on additional layout options.

## Tables

There are a number of options available for HTML display of data frames within Distill articles. Here, we use the `paged_table()` function to display a page-able view of the `mtcars` dataset built in to R:

````clike
```{r, distill.layout="l-body-outset"}`r ''`
library(rmarkdown)
paged_table(mtcars)
```
````

```{r, distill.layout="l-body-outset"}
library(rmarkdown)
paged_table(mtcars)
```

Note that we used `distill.layout="l-body-outset"` to cause the table to occupy slightly more horizontal space than the article text. All of available [figure layout options](figures.html) work as expected for tables.

See the documentation on [table display](tables.html) for details on the various techniques available for rendering tables.

## Diagrams

There are many options for including diagrams within Distill articles, including support for [GraphViz](https://www.graphviz.org/), [D3.js](https://d3js.org/), and [SVG](https://en.wikipedia.org/wiki/Scalable_Vector_Graphics) files exported from illustration programs like [Inkscape](https://inkscape.org/en/).

For example, here we use the [DiagrammerR](http://rich-iannone.github.io/DiagrammeR/) package to include a GraphViz illustration:

````clike
```{r, distill.layout="l-page", fig.height=2}`r ''`
library(DiagrammeR)
grViz("images/graph.gv")
```
````

```{r, distill.layout="l-page", fig.height=2}
library(DiagrammeR)
grViz("images/graph.gv")
```

Note that since this diagram is much wider than it is tall, we specify `distill.layout="l-page"` to provide adequate horizontal layout space and `fig.height=2` to ensure the correct aspect ratio. See the documentation on [figure layout](figures.html) for details on all available layout options.

See the documentation on [diagrams](diagrams.html) to learn more.


## Equations

Inline and display equations are supported via standard markdown [MathJax](https://www.mathjax.org/) syntax. For example, the following [LaTeX math](https://en.wikibooks.org/wiki/LaTeX/Mathematics):


    $$
    \sigma = \sqrt{ \frac{1}{N} \sum_{i=1}^N (x_i -\mu)^2}
    $$
    
Will be rendered as:

$$
\sigma = \sqrt{ \frac{1}{N} \sum_{i=1}^N (x_i -\mu)^2}
$$


## Citations

Bibtex is the supported way of making academic citations. To include citations, first create a bibtex file and refer to it from the `bibliography` field of the YAML front-matter (as [illustrated above](#front-matter)).

For example, your bibliography file might contain:

```bibtex
@Book{xie2015,
  title = {Dynamic Documents with R and knitr},
  author = {Yihui Xie},
  publisher = {Chapman and Hall/CRC},
  address = {Boca Raton, Florida},
  year = {2015},
  edition = {2nd},
  note = {ISBN 978-1498716963},
  url = {http://yihui.name/knitr/},
}
```

You are strongly encouraged you to populate the `url` bibtex field where possible so that links can be provided for citations.

Citations are then used in the article body with standard Pandoc markdown notation, for example: `[@xie2015]` (which references an id provided in the bibliography). Note that multiple ids (separated by semicolons) can be provided.

The citation is presented inline like this: [@xie2015] (a number that displays more information on hover). If you have an appendix, a bibliography is automatically created and populated in it.

Distill chose a numerical inline citation style to improve readability of citation dense articles and because many of the benefits of longer citations are obviated by displaying more information on hover. However, we consider it good style to mention author last names if you discuss something at length and it fits into the flow well---the authors are human and itâ€™s nice for them to have the community associate them with their work.

## Footnotes

Footnotes use standard Pandoc markdown notation, for example `^[This will become a hover-able footnote]`. The number of the footnote will be automatically generated. ^[This will become a hover-able footnote]

You can also optionally include notes in the gutter of the article (immediately to the right of the article text). To do this create a `<div>` with class `l-gutter`. For example:

<div class="l-gutter">
This content will appear in the gutter of the article.
</div>


```html
<div class="l-gutter">
This content will appear in the gutter of the article.
</div>
```


## Code Blocks

Syntax highlighting is provided for knitr code chunks. Note that by default the Distill format does not display the code for chunks that are evaluated to produce output (knitr option `echo = FALSE`). 

To display the code that was evaluated to produce output you can set the `echo` chunk option to `TRUE`:

````clike
```{r, echo=TRUE}`r ''`
1 + 1
```
````

To include code that is only displayed and not evaluated specify the `eval=FALSE` option:

````clike
```{r, eval=FALSE, echo=TRUE}`r ''`
1 + 1
```
````

## Appendices

Appendices can be added after your article by adding the `.appendix` class to any level 1 or level 2 header. For example:

```html
## Acknowledgments {.appendix}

This is a place to recognize people and institutions. It may also be a good place
to acknowledge and cite software that makes your work possible.

## Author Contributions {.appendix}

We strongly encourage you to include an author contributions statement briefly 
describing what each author did.
```

Footnotes and references will be included in the same section, immediately beneath any custom appendices.

## Acknowledgments {.appendix}

Distill for R Markdown builds on the work of many individuals and projects. [Shan Carter](https://github.com/shancarter), [Ludwig Schubert](https://github.com/ludwigschubert), and [Christopher Olah](https://github.com/colah) created the Distill web framework. [John MacFarlane](https://github.com/jgm) created the Pandoc universal markup converter. [Davide Cervone](https://github.com/dpvc) and [Volker Sorge](https://github.com/zorkow) created the MathJax library for rendering mathmatical notation on the web. [Mike Bostock](https://github.com/mbostock) created the D3 library for producing dynamic, interactive data visualizations for the web. We are grateful for the spirit of generousity that moved these individuals to create high-quality open source software for the benefit of all.





