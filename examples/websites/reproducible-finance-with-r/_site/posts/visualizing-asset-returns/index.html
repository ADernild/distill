<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="radix" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

  <!--radix_placeholder_meta_tags-->
<title>Reproducible Finance with R: Visualizing Asset Returns</title>

<meta property="description" itemprop="description" content="In this post we take a closer look at the individual assets which compose a portfolio. The motivation is to make sure we have scrutinized our assets before they get into our portfolio, as once the portfolio has been constructed, it is tempting to keep the analysis at the portfolio level &#10;"/>

<link rel="license" href="https://creativecommons.org/licenses/by/4.0/"/>
<link rel="icon" type="image/png" href="images/favicon.png"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2017-11-09"/>
<meta property="article:created" itemprop="dateCreated" content="2017-11-09"/>
<meta name="article:author" content="Jonathan Regenstein"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Reproducible Finance with R: Visualizing Asset Returns"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="In this post we take a closer look at the individual assets which compose a portfolio. The motivation is to make sure we have scrutinized our assets before they get into our portfolio, as once the portfolio has been constructed, it is tempting to keep the analysis at the portfolio level &#10;"/>
<meta property="og:image" content="https://beta.rstudioconnect.com/content/3776/posts/visualizing-asset-returns/visualizing-asset-returns_files/figure-html5/unnamed-chunk-9-1.png"/>
<meta property="og:image:width" content="1152"/>
<meta property="og:image:height" content="576"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Reproducible Finance with R"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Reproducible Finance with R: Visualizing Asset Returns"/>
<meta property="twitter:description" content="In this post we take a closer look at the individual assets which compose a portfolio. The motivation is to make sure we have scrutinized our assets before they get into our portfolio, as once the portfolio has been constructed, it is tempting to keep the analysis at the portfolio level &#10;"/>
<meta property="twitter:image" content="https://beta.rstudioconnect.com/content/3776/posts/visualizing-asset-returns/visualizing-asset-returns_files/figure-html5/unnamed-chunk-9-1.png"/>
<meta property="twitter:image:width" content="1152"/>
<meta property="twitter:image:height" content="576"/>

<!--/radix_placeholder_meta_tags-->
  
  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Visualizing Asset Returns"]},{"type":"character","attributes":{},"value":["In this post we take a closer look at the individual assets which compose a portfolio. The motivation is to make sure we have scrutinized our assets before they get into our portfolio, as once the portfolio has been constructed, it is tempting to keep the analysis at the portfolio level \n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url","affiliation","affiliation_url"]}},"value":[{"type":"character","attributes":{},"value":["Jonathan Regenstein"]},{"type":"character","attributes":{},"value":["https://www.linkedin.com/in/jkregenstein/"]},{"type":"character","attributes":{},"value":["RStudio"]},{"type":"character","attributes":{},"value":["https://www.rstudio.com"]}]}]},{"type":"character","attributes":{},"value":["11-09-2017"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["radix::radix_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]}]}
  </script>
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["radix-preview.png","visualizing-asset-returns_files/bowser-1.9.3/bowser.min.js","visualizing-asset-returns_files/distill-2.2.21/distill.css","visualizing-asset-returns_files/distill-2.2.21/distill.js","visualizing-asset-returns_files/distill-2.2.21/template.v2.js","visualizing-asset-returns_files/figure-html5/unnamed-chunk-5-1.png","visualizing-asset-returns_files/figure-html5/unnamed-chunk-6-1.png","visualizing-asset-returns_files/figure-html5/unnamed-chunk-7-1.png","visualizing-asset-returns_files/figure-html5/unnamed-chunk-8-1.png","visualizing-asset-returns_files/figure-html5/unnamed-chunk-9-1.png","visualizing-asset-returns_files/fontawesome-4.5.0/font-awesome.min.css","visualizing-asset-returns_files/fontawesome-4.5.0/fonts/fontawesome-webfont.eot","visualizing-asset-returns_files/fontawesome-4.5.0/fonts/fontawesome-webfont.svg","visualizing-asset-returns_files/fontawesome-4.5.0/fonts/fontawesome-webfont.ttf","visualizing-asset-returns_files/fontawesome-4.5.0/fonts/fontawesome-webfont.woff","visualizing-asset-returns_files/fontawesome-4.5.0/fonts/fontawesome-webfont.woff2","visualizing-asset-returns_files/fontawesome-4.5.0/fonts/FontAwesome.otf","visualizing-asset-returns_files/highchart-binding-0.5.0/highchart.js","visualizing-asset-returns_files/highchart-binding-0.5.0/highchart.yaml","visualizing-asset-returns_files/highchart-binding-0.5.0/highchart2.js","visualizing-asset-returns_files/highchart-binding-0.5.0/highchart2.yaml","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/font-awesome-4.5.0/font-awesome.min.css","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/font-awesome-4.5.0/fonts/fontawesome-webfont.eot","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/font-awesome-4.5.0/fonts/fontawesome-webfont.svg","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/font-awesome-4.5.0/fonts/fontawesome-webfont.ttf","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/font-awesome-4.5.0/fonts/fontawesome-webfont.woff","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/font-awesome-4.5.0/fonts/fontawesome-webfont.woff2","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/font-awesome-4.5.0/fonts/FontAwesome.otf","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/css/motion.css","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/custom/reset.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/custom/symbols-extra.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/custom/text-symbols.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/highcharts-3d.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/highcharts-more.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/highcharts.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/highstock.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/accessibility.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/annotations.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/boost.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/broken-axis.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/canvas-tools.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/data.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/drilldown.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/exporting.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/funnel.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/heatmap.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/map.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/no-data-to-display.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/offline-exporting.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/solid-gauge.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/modules/treemap.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/plugins/annotations.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/plugins/draggable-legend.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/plugins/draggable-points.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/plugins/export-csv.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/plugins/grouped-categories.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/plugins/motion.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/plugins/pattern-fill-v2.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/highcharts-5.0.6/plugins/tooltip-delay.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/htmlwdgtgrid/htmlwdgtgrid.css","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/jquery/jquery.min.js","visualizing-asset-returns_files/highchart-binding-0.5.0/lib/proj4js/proj4.js","visualizing-asset-returns_files/highcharts-5.0.6/css/motion.css","visualizing-asset-returns_files/highcharts-5.0.6/custom/reset.js","visualizing-asset-returns_files/highcharts-5.0.6/custom/symbols-extra.js","visualizing-asset-returns_files/highcharts-5.0.6/custom/text-symbols.js","visualizing-asset-returns_files/highcharts-5.0.6/highcharts-3d.js","visualizing-asset-returns_files/highcharts-5.0.6/highcharts-more.js","visualizing-asset-returns_files/highcharts-5.0.6/highcharts.js","visualizing-asset-returns_files/highcharts-5.0.6/highstock.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/accessibility.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/annotations.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/boost.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/broken-axis.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/canvas-tools.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/data.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/drilldown.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/exporting.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/funnel.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/heatmap.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/map.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/no-data-to-display.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/offline-exporting.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/solid-gauge.js","visualizing-asset-returns_files/highcharts-5.0.6/modules/treemap.js","visualizing-asset-returns_files/highcharts-5.0.6/plugins/annotations.js","visualizing-asset-returns_files/highcharts-5.0.6/plugins/draggable-legend.js","visualizing-asset-returns_files/highcharts-5.0.6/plugins/draggable-points.js","visualizing-asset-returns_files/highcharts-5.0.6/plugins/export-csv.js","visualizing-asset-returns_files/highcharts-5.0.6/plugins/grouped-categories.js","visualizing-asset-returns_files/highcharts-5.0.6/plugins/motion.js","visualizing-asset-returns_files/highcharts-5.0.6/plugins/pattern-fill-v2.js","visualizing-asset-returns_files/highcharts-5.0.6/plugins/tooltip-delay.js","visualizing-asset-returns_files/htmlwdgtgrid-1/htmlwdgtgrid.css","visualizing-asset-returns_files/htmlwidgets-1.2/htmlwidgets.js","visualizing-asset-returns_files/jquery-1.11.3/jquery.min.js","visualizing-asset-returns_files/proj4js-2.3.15/proj4.js","visualizing-asset-returns_files/webcomponents-2.0.0/webcomponents.js","visualizing-asset-returns.html"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->

<script type="application/javascript">

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header);
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.radix-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.radix-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #455a64;
  font-size: 15px;
  font-weight: 300;
}

.radix-site-nav a {
  color: inherit;
  text-decoration: none;
}

.radix-site-nav a:hover {
  color: white;
}

@media print {
  .radix-site-nav {
    display: none;
  }
}

.radix-site-header {

}

.radix-site-footer {

}


/* Site Header */

.radix-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.radix-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .radix-site-header .nav-left {
    margin-left: 0;
  }
}


.radix-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.radix-site-header a,
.radix-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.radix-site-header .title {
  font-size: 18px;
}

.radix-site-header .logo {
  padding: 0;
}

.radix-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.radix-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .radix-site-header .logo img {
    display: inline-block;
  }
  .radix-site-header .nav-left {
    margin-left: 20px;
  }
  .radix-site-header .nav-right {
    margin-right: 20px;
  }
  .radix-site-header .title {
    padding-left: 12px;
  }
}


.radix-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .radix-site-header a, .radix-site-header .nav-dropdown  {display: none;}
  .radix-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .radix-site-header .title {
    margin-left: 0;
  }
  .radix-site-header .nav-right {
    margin-right: 0;
  }
  .radix-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .radix-site-header.responsive {position: relative;}
  .radix-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .radix-site-header.responsive a,
  .radix-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .radix-site-header.responsive .nav-left,
  .radix-site-header.responsive .nav-right {
    width: 100%;
  }
  .radix-site-header.responsive .nav-dropdown {float: none;}
  .radix-site-header.responsive .nav-dropdown-content {position: relative;}
  .radix-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.radix-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

</style>

<link href="../../site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet"/>
<script src="../../site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="../../site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<!--/radix_placeholder_navigation_in_header-->
  <script src="../../site_libs/htmlwidgets-1.2/htmlwidgets.js"></script>
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/proj4js-2.3.15/proj4.js"></script>
  <link href="../../site_libs/highcharts-5.0.6/css/motion.css" rel="stylesheet" />
  <script src="../../site_libs/highcharts-5.0.6/highstock.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/highcharts-3d.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/highcharts-more.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/modules/annotations.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/modules/broken-axis.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/modules/data.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/modules/drilldown.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/modules/exporting.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/modules/funnel.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/modules/heatmap.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/modules/map.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/modules/no-data-to-display.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/modules/offline-exporting.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/modules/solid-gauge.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/modules/treemap.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/plugins/annotations.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/plugins/draggable-legend.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/plugins/draggable-points.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/plugins/export-csv.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/plugins/grouped-categories.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/plugins/motion.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/plugins/pattern-fill-v2.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/plugins/tooltip-delay.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/custom/reset.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/custom/symbols-extra.js"></script>
  <script src="../../site_libs/highcharts-5.0.6/custom/text-symbols.js"></script>
  <link href="../../site_libs/fontawesome-4.5.0/font-awesome.min.css" rel="stylesheet" />
  <link href="../../site_libs/htmlwdgtgrid-1/htmlwdgtgrid.css" rel="stylesheet" />
  <script src="../../site_libs/highchart-binding-0.5.0/highchart.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <link href="../../site_libs/distill-2.2.21/distill.css" rel="stylesheet" />
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <script src="../../site_libs/distill-2.2.21/distill.js"></script>
  <!--radix_placeholder_site_in_header-->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-77306155-2"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-77306155-2');
</script>
<!--/radix_placeholder_site_in_header-->


</head>

<body>


<script id="distill-front-matter" type="text/json">
{"title":"Visualizing Asset Returns","description":"In this post we take a closer look at the individual assets which compose a portfolio. The motivation is to make sure we have scrutinized our assets before they get into our portfolio, as once the portfolio has been constructed, it is tempting to keep the analysis at the portfolio level \n","authors":[{"author":"Jonathan Regenstein","authorURL":"https://www.linkedin.com/in/jkregenstein/","affiliation":"RStudio","affiliationURL":"https://www.rstudio.com"}],"publishedDate":"2017-11-09T00:00:00.000-06:00","citationText":"Regenstein, 2017"}
</script>
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="radix-site-nav radix-site-header">
<div class="nav-left">
<span class="logo">
<img src="../../images/rstudio.png"/>
</span>
<a href="../../index.html" class="title">Reproducible Finance with R</a>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<a href="../../contributors.html">Contributors</a>
<a href="../../index.xml">
<i class="fa fa-rss"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Visualizing Asset Returns</h1>
<p>In this post we take a closer look at the individual assets which compose a portfolio. The motivation is to make sure we have scrutinized our assets before they get into our portfolio, as once the portfolio has been constructed, it is tempting to keep the analysis at the portfolio level</p>
</div>

<div class="d-byline">
  Jonathan Regenstein <a href="https://www.linkedin.com/in/jkregenstein/" class="uri">https://www.linkedin.com/in/jkregenstein/</a> (RStudio)<a href="https://www.rstudio.com" class="uri">https://www.rstudio.com</a>
  
<br/>11-09-2017
</div>

<div class="d-article">
<p>Here’s the portfolio we’ll be visualizing the assets of:</p>
<ul>
<li>SPY (S&amp;P 500 fund) weighted 25%</li>
<li>EFA (a non-US equities fund) weighted 25%</li>
<li>IJS (a small-cap value fund) weighted 20%</li>
<li>EEM (an emerging-mkts fund) weighted 20%</li>
<li>AGG (a bond fund) weighted 10%</li>
</ul>
<p>Let’s load up our packages.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<pre class="r"><code>
library(tidyverse)
library(tidyquant)
library(timetk)
library(tibbletime)
library(highcharter)</code></pre>
</div>
<p>To get our objects into the global environment, we use the next code chunk, which should look familiar from the previous post: we will create one <code>xts</code> object and one <code>tibble</code>, in long/tidy format, of monthly log returns.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<pre class="r"><code>
# The symbols vector holds our tickers. 
symbols &lt;- c(&quot;SPY&quot;,&quot;EFA&quot;, &quot;IJS&quot;, &quot;EEM&quot;,&quot;AGG&quot;)

prices &lt;- 
  getSymbols(symbols, src = &#39;yahoo&#39;, from = &quot;2005-01-01&quot;, 
             auto.assign = TRUE, warnings = FALSE) %&gt;% 
  map(~Ad(get(.))) %&gt;% 
  reduce(merge) %&gt;%
  `colnames&lt;-`(symbols)

# XTS method
prices_monthly &lt;- to.monthly(prices, indexAt = &quot;last&quot;, OHLC = FALSE)
asset_returns &lt;- na.omit(Return.calculate(prices_monthly, method = &quot;log&quot;))

# Tidyverse method, to long, tidy format
asset_returns_long &lt;- 
  prices %&gt;% 
  to.monthly(indexAt = &quot;last&quot;, OHLC = FALSE) %&gt;% 
  tk_tbl(preserve_index = TRUE, rename_index = &quot;date&quot;) %&gt;%
  gather(asset, returns, -date) %&gt;% 
  group_by(asset) %&gt;%  
  mutate(returns = (log(returns) - log(lag(returns))))</code></pre>
</div>
<p>We now have two objects holding monthly log returns, <code>asset_returns</code> and <code>asset_returns_long</code>. First, let’s use <code>highcharter</code> to visualize the <code>xts</code> formatted returns.</p>
<p>Highcharter is fantastic for visualizing a time series or many time series. First, we set <code>highchart(type = &quot;stock&quot;)</code> to get a nice time series line. Then we add each of our series to the highcharter code flow. In this case, we’ll add our columns from the xts object.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<pre class="r"><code>
highchart(type = &quot;stock&quot;) %&gt;% 
  hc_title(text = &quot;Monthly Log Returns&quot;) %&gt;%
  hc_add_series(asset_returns$SPY, 
                  name = names(asset_returns$SPY)) %&gt;%
  hc_add_series(asset_returns$EFA, 
                  name = names(asset_returns$EFA)) %&gt;%
  hc_add_series(asset_returns$IJS, 
                  name = names(asset_returns$IJS)) %&gt;%
  hc_add_theme(hc_theme_flat()) %&gt;%
  hc_navigator(enabled = FALSE) %&gt;% 
  hc_scrollbar(enabled = FALSE)</code></pre>
<div id="htmlwidget-2ad651f6a4771c1ba31a" style="width:100%;height:500px;" class="highchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-2ad651f6a4771c1ba31a">{"x":{"hc_opts":{"title":{"text":"Monthly Log Returns"},"yAxis":{"title":{"text":null}},"credits":{"enabled":false},"exporting":{"enabled":false},"plotOptions":{"series":{"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"},"bubble":{"minSize":5,"maxSize":25}},"annotationsOptions":{"enabledButtons":false},"tooltip":{"delayForDisplay":10},"series":[{"data":[[1109548800000,0.0206886103480688],[1112227200000,-0.0184625828824991],[1114732800000,-0.0189127890360385],[1117497600000,0.0317164031066755],[1120089600000,0.00151373855992887],[1122595200000,0.0375477650263871],[1125446400000,-0.00941878218746162],[1128038400000,0.00799319199060466],[1130716800000,-0.0239348272353022],[1133308800000,0.043013784511837],[1135900800000,-0.0019153644144918],[1138665600000,0.0237305548937448],[1141084800000,0.00570890943850166],[1143763200000,0.0163692837254681],[1146182400000,0.0125524391280027],[1149033600000,-0.0305835877895086],[1151625600000,0.0026047787897916],[1154304000000,0.00446859847122205],[1156982400000,0.0215877525052104],[1159488000000,0.0266432202726721],[1162252800000,0.0310303263962437],[1164844800000,0.0196899777503399],[1167350400000,0.0132827769407333],[1170201600000,0.0149281740401364],[1172620800000,-0.0198123580886307],[1175212800000,0.0115220788891683],[1177891200000,0.0433428521631569],[1180569600000,0.0333576021124644],[1183075200000,-0.0147287520819619],[1185840000000,-0.0318106977425199],[1188518400000,0.0127511036735335],[1190937600000,0.0379838643632597],[1193788800000,0.0134749237445275],[1196380800000,-0.0395024693484318],[1199059200000,-0.0113244065157936],[1201737600000,-0.0623662964472214],[1204243200000,-0.0261819175266478],[1206921600000,-0.00898247548355169],[1209513600000,0.0465609428648142],[1212105600000,0.0150033752413528],[1214784000000,-0.0872758205965889],[1217462400000,-0.00902662479423899],[1219968000000,0.01533569867129],[1222732800000,-0.0989074853817549],[1225411200000,-0.180547016138192],[1227830400000,-0.0721475706236498],[1230681600000,0.0097481484739621],[1233273600000,-0.0856819589280384],[1235692800000,-0.113672071728004],[1238457600000,0.0800221969236121],[1241049600000,0.0947153509352008],[1243555200000,0.0568087175141532],[1246320000000,-0.00065491285249486],[1248998400000,0.0719534483409427],[1251676800000,0.0362739184553273],[1254268800000,0.0348431067909045],[1256860800000,-0.0194123696541517],[1259539200000,0.0597833989146146],[1262217600000,0.0189208221900081],[1264723200000,-0.0370194146927227],[1267142400000,0.030718487748107],[1269993600000,0.0590984424103249],[1272585600000,0.015351435068319],[1275004800000,-0.0827888903401695],[1277856000000,-0.0531277367794685],[1280448000000,0.0660694626990797],[1283212800000,-0.0460234602803791],[1285804800000,0.085768788542615],[1288310400000,0.0374904776310814],[1291075200000,0],[1293753600000,0.0647127013743045],[1296432000000,0.0230329176044215],[1298851200000,0.0341474181788675],[1301529600000,0.000120190888536875],[1304035200000,0.0285499372568934],[1306800000000,-0.0112779221213977],[1309392000000,-0.0170135714548278],[1311897600000,-0.0202074063621174],[1314748800000,-0.0565445095337358],[1317340800000,-0.0719480776468915],[1320019200000,0.103591443347054],[1322611200000,-0.00407196351257078],[1325203200000,0.0103940171238852],[1327968000000,0.0453314149416419],[1330473600000,0.0424897465648399],[1333065600000,0.0316573199879704],[1335744000000,-0.00669810641514434],[1338422400000,-0.0619346017744515],[1340928000000,0.0397790699332612],[1343692800000,0.0117604554773907],[1346371200000,0.0247440222867592],[1348790400000,0.02503481629806],[1351641600000,-0.0183659378850125],[1354233600000,0.00564383140279379],[1356912000000,0.00889479554435813],[1359590400000,0.0499229684750562],[1362009600000,0.0126783064974649],[1364428800000,0.0372679302958732],[1367280000000,0.0190299561882163],[1369958400000,0.0233355435829417],[1372377600000,-0.0134345036208492],[1375228800000,0.0503859423925439],[1377820800000,-0.0304511509934642],[1380499200000,0.0311557415725146],[1383177600000,0.0452664479159646],[1385683200000,0.0292068669449934],[1388448000000,0.0255975500685599],[1391126400000,-0.0358845680703457],[1393545600000,0.0445105212628771],[1396224000000,0.00825899101816052],[1398816000000,0.00692748537091159],[1401408000000,0.0229412388670553],[1404086400000,0.0204329538190615],[1406764800000,-0.0135286228472031],[1409270400000,0.0387050128707767],[1412035200000,-0.0138914870976246],[1414713600000,0.0232778555456852],[1417132800000,0.0271013695694808],[1419984000000,-0.00254028265622264],[1422576000000,-0.0300771936761439],[1424995200000,0.0546821493433152],[1427760000000,-0.0158314857747115],[1430352000000,0.00978601546958213],[1432857600000,0.0127742418546086],[1435622400000,-0.0203250982934167],[1438300800000,0.0219061561058105],[1440979200000,-0.0633070590651519],[1443571200000,-0.0253952003308955],[1446163200000,0.0818438478405952],[1448841600000,0.00364850196181088],[1451520000000,-0.0174358377504928],[1454025600000,-0.0510686256577895],[1456704000000,-0.000826322621327868],[1459382400000,0.0650984027137573],[1461888000000,0.00393343223643772],[1464652800000,0.0168685077498187],[1467244800000,0.00347182090872877],[1469750400000,0.0358220317693059],[1472601600000,0.00119670389985682],[1475193600000,5.83956045812073e-05],[1477872000000,-0.0174890266019974],[1480464000000,0.0361761115990245],[1483056000000,0.0200686581848641],[1485820800000,0.0177365329766994],[1488240000000,0.0385391843912695],[1490918400000,0.00124919411121294],[1493337600000,0.00987722044430317],[1496188800000,0.014014248361585],[1498780800000,0.00635469680993417],[1501459200000,0.0203458592996055],[1504137600000,0.00291339675646451],[1506643200000,0.0199491538958627],[1509408000000,0.0232907586883302],[1512000000000,0.0301079902830876],[1514505600000,0.0120549150238123],[1517356800000,0.0548282525396715],[1519776000000,-0.0370379104423053],[1522281600000,-0.0277931472363298],[1525046400000,0.00515490657369533],[1527724800000,0.0240183059614996],[1528070400000,0.0145099718107824]],"name":"SPY"},{"data":[[1109548800000,0.0371512156080311],[1112227200000,-0.0265839531834575],[1114732800000,-0.0163089500804672],[1117497600000,-0.00867497493472014],[1120089600000,0.0142256979719781],[1122595200000,0.029527337865455],[1125446400000,0.0376441755168422],[1128038400000,0.0362785494622759],[1130716800000,-0.0323595258177876],[1133308800000,0.0228477018217781],[1135900800000,0.0505279526719717],[1138665600000,0.0561107822589464],[1141084800000,-0.0070242793786659],[1143763200000,0.0392700005569204],[1146182400000,0.0467929774482063],[1149033600000,-0.0389679067815845],[1151625600000,-0.000611516207961404],[1154304000000,0.00807241945662573],[1156982400000,0.0251661714058948],[1159488000000,0.00221654081381173],[1162252800000,0.0368051478715223],[1164844800000,0.0302670710152899],[1167350400000,0.0314714085346504],[1170201600000,0.0138346026548],[1172620800000,-0.00121308535363962],[1175212800000,0.0285828711238638],[1177891200000,0.0367980936307886],[1180569600000,0.0233483591533954],[1183075200000,-0.00321388600090433],[1185840000000,-0.0231707501830192],[1188518400000,-0.00635577146562127],[1190937600000,0.0518094194470562],[1193788800000,0.0416208132121119],[1196380800000,-0.0369097069029483],[1199059200000,-0.0302660806948456],[1201737600000,-0.0817215568750527],[1204243200000,-0.0102819586874152],[1206921600000,0.00418119479330414],[1209513600000,0.0529538426407679],[1212105600000,0.0118018628260224],[1214784000000,-0.0919706517151924],[1217462400000,-0.0337660419794861],[1219968000000,-0.0434047891375289],[1222732800000,-0.121447059990743],[1225411200000,-0.233633444428049],[1227830400000,-0.0658407596094444],[1230681600000,0.0849696612181896],[1233273600000,-0.14770658053556],[1235692800000,-0.109676811474729],[1238457600000,0.0805749995597784],[1241049600000,0.109024954935144],[1243555200000,0.123913326479655],[1246320000000,-0.0141486231388708],[1248998400000,0.0956873046028917],[1251676800000,0.0440461464345256],[1254268800000,0.0372621029862907],[1256860800000,-0.0255617205497085],[1259539200000,0.0384628811454668],[1262217600000,0.00707121574000258],[1264723200000,-0.0519790709020174],[1267142400000,0.00266390760279833],[1269993600000,0.0618983688104544],[1272585600000,-0.0284466741963882],[1275004800000,-0.118702176588087],[1277856000000,-0.0208350725832411],[1280448000000,0.109844082858649],[1283212800000,-0.0386890546739722],[1285804800000,0.0950550968439861],[1288310400000,0.0373491163875244],[1291075200000,-0.0494394042139432],[1293753600000,0.0798095056186106],[1296432000000,0.0207385707391849],[1298851200000,0.0348824269504249],[1301529600000,-0.0241729054581916],[1304035200000,0.0547329548190412],[1306800000000,-0.0223081204338826],[1309392000000,-0.0121814332719419],[1311897600000,-0.0240651505254741],[1314748800000,-0.0916207191658218],[1317340800000,-0.114382170842553],[1320019200000,0.0919177549965187],[1322611200000,-0.0220042474987787],[1325203200000,-0.0219896276539195],[1327968000000,0.0513539116345525],[1330473600000,0.0471998660733428],[1333065600000,0.00419910700740367],[1335744000000,-0.0209876070812456],[1338422400000,-0.118155322572849],[1340928000000,0.0680633039794856],[1343692800000,0.000800474385432182],[1346371200000,0.031498521679695],[1348790400000,0.0267703251164009],[1351641600000,0.0108840723205539],[1354233600000,0.0274290881107087],[1356912000000,0.0428789793270279],[1359590400000,0.036606357660212],[1362009600000,-0.0129693768058883],[1364428800000,0.0129693768058883],[1367280000000,0.0489677595647868],[1369958400000,-0.030655605808199],[1372377600000,-0.0271532966165866],[1375228800000,0.0518602597204674],[1377820800000,-0.0197461885739507],[1380499200000,0.0753384524755201],[1383177600000,0.0320817766326984],[1385683200000,0.00544941923570352],[1388448000000,0.0215238060420591],[1391126400000,-0.0534132609941533],[1393545600000,0.0595048851401234],[1396224000000,-0.00460253733671756],[1398816000000,0.0165294028420071],[1401408000000,0.0158284861147804],[1404086400000,0.00916827518237717],[1406764800000,-0.026379531422247],[1409270400000,0.00180028858170189],[1412035200000,-0.0395984855950884],[1414713600000,-0.00265472923986465],[1417132800000,0.000625248276797663],[1419984000000,-0.0407436874213323],[1422576000000,0.00622641171696525],[1424995200000,0.0614506453899422],[1427760000000,-0.0143887466415578],[1430352000000,0.0358166248478158],[1432857600000,0.0019526043709277],[1435622400000,-0.031671821717306],[1438300800000,0.0201143877332655],[1440979200000,-0.0771524107594885],[1443571200000,-0.0451948528379211],[1446163200000,0.0640259069840723],[1448841600000,-0.00755581380300363],[1451520000000,-0.0235888800009683],[1454025600000,-0.0567578152530044],[1456704000000,-0.0339139019954944],[1459382400000,0.0637455947647125],[1461888000000,0.0219751955771752],[1464652800000,-0.000856107257818373],[1467244800000,-0.0244945616360019],[1469750400000,0.0390001766950951],[1472601600000,0.00532695212623135],[1475193600000,0.0132790445412603],[1477872000000,-0.0224036490141968],[1480464000000,-0.0179745049825604],[1483056000000,0.0267059400895553],[1485820800000,0.0323818455984117],[1488240000000,0.0118364428718687],[1490918400000,0.031805674822321],[1493337600000,0.023952205763865],[1496188800000,0.0348101976378778],[1498780800000,0.00295592222815078],[1501459200000,0.0261879549365212],[1504137600000,-0.000448342511581323],[1506643200000,0.0233428392112245],[1509408000000,0.0166536668188426],[1512000000000,0.00687000462873666],[1514505600000,0.0133983186411166],[1517356800000,0.0489865282578004],[1519776000000,-0.0495556135117807],[1522281600000,-0.00843158996738591],[1525046400000,0.0150978229605396],[1527724800000,-0.0191242591735845],[1528070400000,0.0116038404549696]],"name":"EFA"},{"data":[[1109548800000,0.0286094280336568],[1112227200000,-0.0238824255884236],[1114732800000,-0.0525564066202509],[1117497600000,0.0597360964420752],[1120089600000,0.0384077542213253],[1122595200000,0.0567709887247871],[1125446400000,-0.0188803632389969],[1128038400000,0.000488596338075187],[1130716800000,-0.0347111301569347],[1133308800000,0.0479257911851372],[1135900800000,-0.010597668818042],[1138665600000,0.0838890018931018],[1141084800000,0.00273121653364417],[1143763200000,0.0474204221695542],[1146182400000,0.001784033394161],[1149033600000,-0.0465787210164414],[1151625600000,0.00042225897403636],[1154304000000,-0.0314467650545645],[1156982400000,0.0266835678961863],[1159488000000,0.0117933234818892],[1162252800000,0.0537274658181879],[1164844800000,0.0234990636200392],[1167350400000,0.00314706897129913],[1170201600000,0.021144783082379],[1172620800000,-0.00926957792631544],[1175212800000,0.0090195259466368],[1177891200000,0.0182141595330494],[1180569600000,0.0452973584575256],[1183075200000,-0.0227122676089202],[1185840000000,-0.064638470545253],[1188518400000,0.0132132450491866],[1190937600000,0.00315396436733639],[1193788800000,0.0105471138441402],[1196380800000,-0.0741584543457554],[1199059200000,-0.00720867040308004],[1201737600000,-0.0408220425256074],[1204243200000,-0.0342094612970483],[1206921600000,0.00822038198104291],[1209513600000,0.0260929811590156],[1212105600000,0.0384070743573206],[1214784000000,-0.0879252533693],[1217462400000,0.0283276511338935],[1219968000000,0.0465204137077375],[1222732800000,-0.0493365789127438],[1225411200000,-0.221415555166149],[1227830400000,-0.125534319976146],[1230681600000,0.0637302850581944],[1233273600000,-0.150182192750265],[1235692800000,-0.139558747943729],[1238457600000,0.0732624397580577],[1241049600000,0.173026362875852],[1243555200000,0.0066791046135144],[1246320000000,0.0150715112321924],[1248998400000,0.104382940255257],[1251676800000,0.0342331186830611],[1254268800000,0.0411532376707324],[1256860800000,-0.0626639082644802],[1259539200000,0.0286024569000762],[1262217600000,0.0778782869575125],[1264723200000,-0.0256780719808467],[1267142400000,0.0465279442288757],[1269993600000,0.0750789410237482],[1272585600000,0.0641683136211597],[1275004800000,-0.0892739133898086],[1277856000000,-0.0863781374725541],[1280448000000,0.0649646269894224],[1283212800000,-0.0824208000165179],[1285804800000,0.103833680420905],[1288310400000,0.0395794510611704],[1291075200000,0.0244359677598878],[1293753600000,0.0858592863067997],[1296432000000,-0.00236739931352403],[1298851200000,0.0412456534893355],[1301529600000,0.0218403803422813],[1304035200000,0.0105708178071602],[1306800000000,-0.0178132822698061],[1309392000000,-0.0160791041919168],[1311897600000,-0.028128723025894],[1314748800000,-0.0831287000237229],[1317340800000,-0.111610020734937],[1320019200000,0.142717836149467],[1322611200000,0.00627895590287864],[1325203200000,0.0199985376845024],[1327968000000,0.0760208165722229],[1330473600000,0.0169935045406131],[1333065600000,0.0285561687983282],[1335744000000,-0.0192754070316461],[1338422400000,-0.0744576810734774],[1340928000000,0.044485722531391],[1343692800000,-0.0068850834518015],[1346371200000,0.0399654682225403],[1348790400000,0.0308342157828232],[1351641600000,-0.0198151992227551],[1354233600000,0.0163919701828847],[1356912000000,0.0348940583349524],[1359590400000,0.052133434157998],[1362009600000,0.0161752203262813],[1364428800000,0.0402580832292703],[1367280000000,0.00122261321480011],[1369958400000,0.0419763078517352],[1372377600000,-0.00140298022882845],[1375228800000,0.0635411970286119],[1377820800000,-0.0347433318654611],[1380499200000,0.0638705624116289],[1383177600000,0.0342341988066748],[1385683200000,0.0416609210781971],[1388448000000,0.0128910625308851],[1391126400000,-0.0357753308546238],[1393545600000,0.045257403433574],[1396224000000,0.0133145415164817],[1398816000000,-0.0231841210213366],[1401408000000,0.00620534472500545],[1404086400000,0.0377147164939755],[1406764800000,-0.0520095348800771],[1409270400000,0.0436578629086943],[1412035200000,-0.0612640153590247],[1414713600000,0.0688746647171099],[1417132800000,0.0047737389466791],[1419984000000,0.0252944907028176],[1422576000000,-0.054627962916129],[1424995200000,0.0569147661955958],[1427760000000,0.0101585056231697],[1430352000000,-0.0184176369738465],[1432857600000,0.00750990427398879],[1435622400000,0.0041677785664147],[1438300800000,-0.0273752631541226],[1440979200000,-0.0472683504755347],[1443571200000,-0.0384637056673345],[1446163200000,0.0635897287605909],[1448841600000,0.0244152906105626],[1451520000000,-0.0521531627356371],[1454025600000,-0.0603069185320608],[1456704000000,0.020605356723939],[1459382400000,0.0899059462929683],[1461888000000,0.0210441851640972],[1464652800000,0.00439710726549336],[1467244800000,0.00829583176483695],[1469750400000,0.0493483179733056],[1472601600000,0.0112611616239873],[1475193600000,0.00861490263380027],[1477872000000,-0.0381348352501387],[1480464000000,0.125246421927436],[1483056000000,0.0314932238940493],[1485820800000,-0.012143876469545],[1488240000000,0.0134289167098629],[1490918400000,-0.00653315801671628],[1493337600000,0.00510778835636572],[1496188800000,-0.0228626731549069],[1498780800000,0.0291517193790423],[1501459200000,0.00748160967226319],[1504137600000,-0.0275646141045787],[1506643200000,0.0823217200576778],[1509408000000,0.00591598419331252],[1512000000000,0.036913302321242],[1514505600000,-0.00373126380357824],[1517356800000,0.0131964160373768],[1519776000000,-0.0412611834331278],[1522281600000,0.0135348803005177],[1525046400000,0.0174809211552605],[1527724800000,0.057038940543328],[1528070400000,0.0152059663300008]],"name":"IJS"}],"navigator":{"enabled":false},"scrollbar":{"enabled":false}},"theme":{"colors":["#f1c40f","#2ecc71","#9b59b6","#e74c3c","#34495e","#3498db","#1abc9c","#f39c12","#d35400"],"chart":{"backgroundColor":"#ECF0F1"},"xAxis":{"gridLineDashStyle":"Dash","gridLineWidth":1,"gridLineColor":"#BDC3C7","lineColor":"#BDC3C7","minorGridLineColor":"#BDC3C7","tickColor":"#BDC3C7","tickWidth":1},"yAxis":{"gridLineDashStyle":"Dash","gridLineColor":"#BDC3C7","lineColor":"#BDC3C7","minorGridLineColor":"#BDC3C7","tickColor":"#BDC3C7","tickWidth":1},"legendBackgroundColor":"rgba(0, 0, 0, 0.5)","background2":"#505053","dataLabelsColor":"#B0B0B3","textColor":"#34495e","contrastTextColor":"#F0F0F3","maskColor":"rgba(255,255,255,0.3)"},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","drillUpText":"Back to {series.name}","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"thousandsSep":" ","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"stock","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
<p>Take a look at the chart. It has a line for the monthly log returns of three of our ETFs (and in my opinion, it’s already starting to get crowded). We might be able to pull some useful intuition from this chart. Perhaps one of our ETFs remained stable during the 2008 financial crisis, or had an era of consistently negative/positive returns. Highcharter is great for plotting time series line charts.</p>
<p>Highcharter does have the capacity for histogram making. One method is to first call the base function <code>hist</code> on the data with the arguments for breaks and <code>plot = FALSE</code>. Then we can call <code>hchart</code> on that object.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<pre class="r"><code>
hc_spy &lt;- hist(asset_returns$SPY, breaks = 50, plot = FALSE)

hchart(hc_spy) %&gt;% 
  hc_title(text = &quot;SPY Log Returns Distribution&quot;)</code></pre>
<div id="htmlwidget-b0dab0b07a03d9692a2f" style="width:100%;height:500px;" class="highchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-b0dab0b07a03d9692a2f">{"x":{"hc_opts":{"title":{"text":"SPY Log Returns Distribution"},"yAxis":{"title":{"text":null}},"credits":{"enabled":false},"exporting":{"enabled":false},"plotOptions":{"series":{"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"},"bubble":{"minSize":5,"maxSize":25}},"annotationsOptions":{"enabledButtons":false},"tooltip":{"delayForDisplay":10,"formatter":"function() { return  this.point.name + '<br/>' + this.y; }"},"chart":{"zoomType":"x"},"series":[{"data":[{"x":-0.1825,"y":1,"name":"(-0.185, -0.18]"},{"x":-0.1775,"y":0,"name":"(-0.18, -0.175]"},{"x":-0.1725,"y":0,"name":"(-0.175, -0.17]"},{"x":-0.1675,"y":0,"name":"(-0.17, -0.165]"},{"x":-0.1625,"y":0,"name":"(-0.165, -0.16]"},{"x":-0.1575,"y":0,"name":"(-0.16, -0.155]"},{"x":-0.1525,"y":0,"name":"(-0.155, -0.15]"},{"x":-0.1475,"y":0,"name":"(-0.15, -0.145]"},{"x":-0.1425,"y":0,"name":"(-0.145, -0.14]"},{"x":-0.1375,"y":0,"name":"(-0.14, -0.135]"},{"x":-0.1325,"y":0,"name":"(-0.135, -0.13]"},{"x":-0.1275,"y":0,"name":"(-0.13, -0.125]"},{"x":-0.1225,"y":0,"name":"(-0.125, -0.12]"},{"x":-0.1175,"y":0,"name":"(-0.12, -0.115]"},{"x":-0.1125,"y":1,"name":"(-0.115, -0.11]"},{"x":-0.1075,"y":0,"name":"(-0.11, -0.105]"},{"x":-0.1025,"y":0,"name":"(-0.105, -0.1]"},{"x":-0.0975,"y":1,"name":"(-0.1, -0.095]"},{"x":-0.0925,"y":0,"name":"(-0.095, -0.09]"},{"x":-0.0875,"y":2,"name":"(-0.09, -0.085]"},{"x":-0.0825,"y":1,"name":"(-0.085, -0.08]"},{"x":-0.0775,"y":0,"name":"(-0.08, -0.075]"},{"x":-0.0725,"y":2,"name":"(-0.075, -0.07]"},{"x":-0.0675,"y":0,"name":"(-0.07, -0.065]"},{"x":-0.0625,"y":3,"name":"(-0.065, -0.06]"},{"x":-0.0575,"y":1,"name":"(-0.06, -0.055]"},{"x":-0.0525,"y":2,"name":"(-0.055, -0.05]"},{"x":-0.0475,"y":1,"name":"(-0.05, -0.045]"},{"x":-0.0425,"y":0,"name":"(-0.045, -0.04]"},{"x":-0.0375,"y":4,"name":"(-0.04, -0.035]"},{"x":-0.0325,"y":4,"name":"(-0.035, -0.03]"},{"x":-0.0275,"y":3,"name":"(-0.03, -0.025]"},{"x":-0.0225,"y":3,"name":"(-0.025, -0.02]"},{"x":-0.0175,"y":9,"name":"(-0.02, -0.015]"},{"x":-0.0125,"y":6,"name":"(-0.015, -0.01]"},{"x":-0.00750000000000003,"y":4,"name":"(-0.01, -0.00500000000000003]"},{"x":-0.00250000000000002,"y":6,"name":"(-0.00500000000000002, -1.38777878078145e-17]"},{"x":0.00249999999999999,"y":11,"name":"(-1.38777878078145e-17, 0.00499999999999999]"},{"x":0.00749999999999998,"y":11,"name":"(0.00499999999999998, 0.00999999999999998]"},{"x":0.0125,"y":13,"name":"(0.00999999999999997, 0.015]"},{"x":0.0175,"y":10,"name":"(0.015, 0.02]"},{"x":0.0225,"y":14,"name":"(0.02, 0.025]"},{"x":0.0275,"y":6,"name":"(0.025, 0.03]"},{"x":0.0325,"y":9,"name":"(0.03, 0.035]"},{"x":0.0375,"y":10,"name":"(0.035, 0.04]"},{"x":0.0425,"y":4,"name":"(0.04, 0.045]"},{"x":0.0475,"y":4,"name":"(0.045, 0.05]"},{"x":0.0525,"y":3,"name":"(0.05, 0.055]"},{"x":0.0575,"y":3,"name":"(0.055, 0.06]"},{"x":0.0625,"y":1,"name":"(0.06, 0.065]"},{"x":0.0675,"y":2,"name":"(0.065, 0.07]"},{"x":0.0725,"y":1,"name":"(0.07, 0.075]"},{"x":0.0775,"y":0,"name":"(0.075, 0.08]"},{"x":0.0825,"y":2,"name":"(0.08, 0.085]"},{"x":0.0875,"y":1,"name":"(0.085, 0.09]"},{"x":0.0925,"y":1,"name":"(0.09, 0.095]"},{"x":0.0975,"y":0,"name":"(0.095, 0.1]"},{"x":0.1025,"y":1,"name":"(0.1, 0.105]"}],"type":"column","pointRange":0.005,"groupPadding":0,"pointPadding":0,"borderWidth":0}]},"theme":{"chart":{"backgroundColor":"transparent"}},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","drillUpText":"Back to {series.name}","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"thousandsSep":" ","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":["hc_opts.tooltip.formatter"],"jsHooks":[]}</script>
</div>
<p>Nothing wrong with that chart, and it shows us the distribution of SPY returns. However, <code>highcharter</code> is missing an easy way to chart multiple histograms, and to add density lines to those multiple histograms. The functionality is fine for one set of returns, but here we want to see the distribution of all of our returns series together.</p>
<p>For that, we will head to the tidyverse and use <code>ggplot2</code> on our tidy <code>tibble</code> called <code>assets_returns_long</code>. Because it is in long, tidy format, and it is grouped by the ‘asset’ column, we can chart the asset histograms collectively on one chart.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<pre class="r"><code>
# Make so all titles centered in the upcoming ggplots
theme_update(plot.title = element_text(hjust = 0.5))

asset_returns_long %&gt;% 
  ggplot(aes(x = returns, fill = asset)) + 
  geom_histogram(alpha = 0.25, binwidth = .01)</code></pre>
<p><img src="visualizing-asset-returns_files/figure-html5/unnamed-chunk-5-1.png" width="576" /></p>
</div>
<p>Let’s use <code>facet_wrap(~asset)</code> to break these out by asset. We can add a title with <code>ggtitle</code>.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<pre class="r"><code>
asset_returns_long %&gt;% 
  ggplot(aes(x = returns, fill = asset)) + 
  geom_histogram(alpha = 0.25, binwidth = .01) + 
  facet_wrap(~asset) + 
  ggtitle(&quot;Monthly Returns Since 2005&quot;)</code></pre>
<p><img src="visualizing-asset-returns_files/figure-html5/unnamed-chunk-6-1.png" width="576" /></p>
</div>
<p>Maybe we don’t want to use a histogram, but instead want to use a density line to visualize the various distributions. We can use the <code>stat_density(geom = &quot;line&quot;, alpha = 1)</code> function to do this. The <code>alpha</code> argument is selecting a line thickness. Let’s also add a label to the x and y axes with the <code>xlab</code> and <code>ylab</code> functions.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<pre class="r"><code>
asset_returns_long %&gt;% 
  ggplot(aes(x = returns, colour = asset, fill = asset)) +
  stat_density(geom = &quot;line&quot;, alpha = 1) +
  ggtitle(&quot;Monthly Returns Since 2005&quot;) +
  xlab(&quot;monthly returns&quot;) +
  ylab(&quot;distribution&quot;) </code></pre>
<p><img src="visualizing-asset-returns_files/figure-html5/unnamed-chunk-7-1.png" width="576" /></p>
</div>
<p>That chart is quite digestible, but we can also <code>facet_wrap(~asset)</code> to break the densities out into individual charts.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<pre class="r"><code>
asset_returns_long %&gt;% 
  ggplot(aes(x = returns, colour = asset, fill = asset)) +
  stat_density(geom = &quot;line&quot;, alpha = 1) +
  facet_wrap(~asset) +
  ggtitle(&quot;Monthly Returns Since 2005&quot;) +
  xlab(&quot;monthly returns&quot;) +
  ylab(&quot;distribution&quot;) </code></pre>
<p><img src="visualizing-asset-returns_files/figure-html5/unnamed-chunk-8-1.png" width="576" /></p>
</div>
<p>Now we can combine all of our ggplots into one nice, faceted plot.</p>
<p>At the same time, to add to the aesthetic toolkit a bit, we will do some editing to the label colors. First off, let’s choose a different color besides black to be the theme. I will go with cornflower blue, because it’s a nice shade and I don’t see it used very frequently elsewhere. Once we have a color, we can choose the different elements of the chart to change in the the <code>theme</code> function. I make a lot of changes here by way of example but feel free to comment out a few of those lines and see the different options.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<pre class="r"><code>
asset_returns_long %&gt;% 
  ggplot(aes(x = returns, colour = asset, fill = asset)) +
  stat_density(geom = &quot;line&quot;, alpha = 1) +
  geom_histogram(alpha = 0.25, binwidth = .01) +
  facet_wrap(~asset) +
  ggtitle(&quot;Monthly Returns Since 2005&quot;) +
  xlab(&quot;monthly returns&quot;) +
  ylab(&quot;distribution&quot;) +
  # Lots of elements can be customized in the theme() function
  theme(plot.title = element_text(colour = &quot;cornflowerblue&quot;),  
        strip.text.x = element_text(size = 8, colour = &quot;white&quot;), 
        strip.background = element_rect(colour = &quot;white&quot;, 
                                        fill = &quot;cornflowerblue&quot;), 
        axis.text.x = element_text(colour = &quot;cornflowerblue&quot;), 
        axis.text = element_text(colour = &quot;cornflowerblue&quot;), 
        axis.ticks.x = element_line(colour = &quot;cornflowerblue&quot;), 
        axis.text.y = element_text(colour = &quot;cornflowerblue&quot;), 
        axis.ticks.y = element_line(colour = &quot;cornflowerblue&quot;),
        axis.title = element_text(colour = &quot;cornflowerblue&quot;),
        legend.title = element_text(colour = &quot;cornflowerblue&quot;),
        legend.text = element_text(colour = &quot;cornflowerblue&quot;)
        )</code></pre>
<p><img src="visualizing-asset-returns_files/figure-html5/unnamed-chunk-9-1.png" width="576" data-radix-preview=1 /></p>
</div>
<p>We now have one chart, with histograms and line densities broken out for each of our assets. This would scale nicely if we had more assets and wanted to peek at more distributions of returns.</p>
<p>We have not done any substantive work today, but the chart of monthly returns is a tool to quickly glance at the data and see if anything unusual jumps out, or some sort of hypothesis comes to mind. We are going to be combining these assets into a portfolio and, once that occurs, we will rarely view the assets in isolation again. Before that leap to portfolio building, it’s a good idea to glance at the portfolio component distributions.</p>
<p>That’s all for today. Thanks for reading!</p>
<!--radix_placeholder_article_footer-->
<p class="social_footer">
  <span class="disqus-comments">
    <i class="fas fa-comments"></i>
    &nbsp;
    <span class="disqus-comment-count" data-disqus-identifier="posts/visualizing-asset-returns/">Comment on this article</span>
  </span>
  <span class="article-sharing">
    Share: &nbsp;
    <a href="https://twitter.com/share?text=Visualizing%20Asset%20Returns&amp;url=https%3A%2F%2Fbeta.rstudioconnect.com%2Fcontent%2F3776%2Fposts%2Fvisualizing-asset-returns%2F">
      <i class="fab fa-twitter"></i>
    </a>
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fbeta.rstudioconnect.com%2Fcontent%2F3776%2Fposts%2Fvisualizing-asset-returns%2F&amp;title=Visualizing%20Asset%20Returns">
      <i class="fab fa-linkedin"></i>
    </a>
  </span>
</p>
<script id="dsq-count-scr" src="https://reproducible-finance-with-r.disqus.com/count.js" async></script>
<div id="disqus_thread" class="hidden"></div>
<script>
var disqus_config = function () {
  this.page.url = 'https://beta.rstudioconnect.com/content/3776/posts/visualizing-asset-returns/';
  this.page.identifier = 'posts/visualizing-asset-returns/';
};
(function() {
  var d = document, s = d.createElement('script');
  s.src = 'https://reproducible-finance-with-r.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script>
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="reuse">Reuse</h3>
  <p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
